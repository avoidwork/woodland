{"version":3,"file":"woodland.esm.min.js","sources":["../src/constants.js","../src/utility.js","../src/woodland.js"],"sourcesContent":["export const all = \"*\";\nexport const delimiter = \"|\";\nexport const levels = {\n\temerg: 0,\n\talert: 1,\n\tcrit: 2,\n\terror: 3,\n\twarn: 4,\n\tnotice: 5,\n\tinfo: 6,\n\tdebug: 7\n};\nexport const months = [\n\t\"Jan\",\n\t\"Feb\",\n\t\"Mar\",\n\t\"Apr\",\n\t\"May\",\n\t\"Jun\",\n\t\"Jul\",\n\t\"Aug\",\n\t\"Sep\",\n\t\"Oct\",\n\t\"Nov\",\n\t\"Dec\"\n];\n","import {extname, join} from \"node:path\";\nimport {createReadStream, readFileSync} from \"node:fs\";\nimport {STATUS_CODES} from \"node:http\";\nimport {fileURLToPath, URL} from \"node:url\";\nimport {coerce} from \"tiny-coerce\";\nimport mimeDb from \"mime-db\";\n\nconst __dirname = fileURLToPath(new URL(\".\", import.meta.url)),\n\thtml = readFileSync(join(__dirname, \"..\", \"tpl\", \"autoindex.html\"), {encoding: \"utf8\"}),\n\tvalid = Object.entries(mimeDb).filter(i => \"extensions\" in i[1]),\n\textensions = valid.reduce((a, v) => {\n\t\tconst result = Object.assign({type: v[0]}, v[1]);\n\n\t\tfor (const key of result.extensions) {\n\t\t\ta[`.${key}`] = result;\n\t\t}\n\n\t\treturn a;\n\t}, {});\n\nexport function autoindex (title = \"\", files = []) { // eslint-disable-line no-unused-vars\n\treturn eval(\"`\" + html + \"`\"); // eslint-disable-line no-eval\n}\n\nexport function clone (arg) {\n\treturn JSON.parse(JSON.stringify(arg));\n}\n\nexport function last (req, res, e, err) {\n\tconst status = res.statusCode || 0;\n\n\tif (err === void 0) {\n\t\te(new Error(req.allow.length > 0 ? req.method !== \"GET\" ? 405 : req.allow.includes(\"GET\") ? 500 : 404 : 404));\n\t} else if (isNaN(status) === false && status >= 400) {\n\t\te(err);\n\t} else {\n\t\te(new Error(status >= 400 ? status : isNaN(err.message) === false ? err.message : STATUS_CODES[err.message || err] || 500));\n\t}\n\n\treturn true;\n}\n\nfunction mime (arg = \"\") {\n\tconst ext = extname(arg);\n\n\treturn ext in extensions ? extensions[ext].type : \"application/octet-stream\";\n}\n\nexport function ms (arg = 0, digits = 3) {\n\treturn `${Number(arg / 1e6).toFixed(digits)} ms`;\n}\n\nexport function next (req, res, e, middleware) {\n\tconst fn = err => process.nextTick(() => {\n\t\tlet obj = middleware.next();\n\n\t\tif (obj.done === false) {\n\t\t\tif (err !== void 0) {\n\t\t\t\twhile (obj.done === false && obj.value.length < 4) {\n\t\t\t\t\tobj = middleware.next();\n\t\t\t\t}\n\n\t\t\t\tif (obj.done === false) {\n\t\t\t\t\tobj.value(err, req, res, fn);\n\t\t\t\t} else {\n\t\t\t\t\tlast(req, res, e, err);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj.value(req, res, fn);\n\t\t\t}\n\t\t} else {\n\t\t\tlast(req, res, e, err);\n\t\t}\n\t});\n\n\treturn fn;\n}\n\nexport function pad (arg = 0) {\n\treturn String(arg).padStart(2, \"0\");\n}\n\nexport function params (req, pos = []) {\n\tif (pos.length > 0) {\n\t\tconst uri = req.parsed.ame.split(\"/\");\n\n\t\tfor (const i of pos) {\n\t\t\treq.params[i[1]] = coerce(decodeURIComponent(uri[i[0]]));\n\t\t}\n\t}\n}\n\nexport function parse (arg) {\n\treturn new URL(typeof arg === \"string\" ? arg : `http://${arg.headers.host || `localhost:${arg.socket.server._connectionKey.replace(/.*::/, \"\")}`}${arg.url}`);\n}\n\nexport function partial (req, res, buffered, status, headers) {\n\tif ((req.headers.range || \"\").indexOf(\"bytes=\") === 0) {\n\t\tconst options = {},\n\t\t\tsize = Buffer.byteLength(buffered);\n\n\t\tfor (const [idx, i] of req.headers.range.replace(\"bytes=\", \"\").split(\",\")[0].split(\"-\").entries()) {\n\t\t\toptions[idx === 0 ? \"start\" : \"end\"] = i ? parseInt(i, 10) : void 0;\n\t\t}\n\n\t\t// Byte offsets\n\t\tif (isNaN(options.start) && isNaN(options.end) === false) {\n\t\t\toptions.start = size - options.end;\n\t\t\toptions.end = size;\n\t\t} else if (isNaN(options.end)) {\n\t\t\toptions.end = size;\n\t\t}\n\n\t\tif ((options.start >= options.end || isNaN(options.start) || isNaN(options.end)) === false) {\n\t\t\treq.range = options;\n\t\t\theaders[\"content-range\"] = `bytes ${options.start + (options.end === size ? 1 : 0)}-${options.end}/${size}`;\n\t\t\theaders[\"content-length\"] = `${options.end - options.start + (options.end === size ? 0 : 1)}`;\n\t\t\tstatus = res.statusCode = 206;\n\t\t\tres.removeHeader(\"etag\"); // Removing etag since this rep is incomplete\n\t\t\tdelete headers.etag;\n\t\t}\n\t}\n}\n\nexport function pipeable (method, arg) {\n\treturn method !== \"HEAD\" && arg !== null && typeof arg.on === \"function\";\n}\n\nexport function reduce (uri, map = new Map(), arg = {}, end = false, ignore = new Set()) {\n\tArray.from(map.entries()).filter(i => {\n\t\ti[0].lastIndex = 0;\n\n\t\treturn i[0].test(uri);\n\t}).forEach(i => {\n\t\tfor (const fn of i[1].handlers) {\n\t\t\targ.middleware.push(fn);\n\n\t\t\tif (end && arg.last === null && ignore.has(fn) === false) {\n\t\t\t\targ.last = fn;\n\t\t\t}\n\t\t}\n\n\t\tif (i[1].pos.length > 0 && arg.pos.length === 0) {\n\t\t\targ.pos = i[1].pos;\n\t\t\targ.params = i[1].params;\n\t\t}\n\t});\n}\n\nexport function stream (req, res, file = {charset: \"\", etag: \"\", path: \"\", stats: {mtime: new Date(), size: 0}}) {\n\tres.header(\"content-length\", file.stats.size);\n\tres.header(\"content-type\", file.charset.length > 0 ? `${mime(file.path)}; charset=${file.charset}` : mime(file.path));\n\tres.header(\"last-modified\", file.stats.mtime.toUTCString());\n\n\tif (file.etag.length > 0) {\n\t\tres.header(\"etag\", file.etag);\n\t\tres.removeHeader(\"cache-control\");\n\t}\n\n\tif (req.method === \"GET\") {\n\t\tif ((file.etag.length > 0 && req.headers[\"if-none-match\"] === file.etag) || (req.headers[\"if-none-match\"] === void 0 && Date.parse(req.headers[\"if-modified-since\"]) >= file.stats.mtime)) { // eslint-disable-line no-extra-parens\n\t\t\tres.removeHeader(\"content-type\");\n\t\t\tres.removeHeader(\"content-length\");\n\t\t\tres.send(\"\", 304);\n\t\t} else {\n\t\t\tconst options = {};\n\t\t\tlet status = 200;\n\n\t\t\t// Setting the partial content headers\n\t\t\tif (\"range\" in req.headers) {\n\t\t\t\tconst range = req.headers.range.replace(/^.*=/, \"\").split(\",\")[0].split(\"-\");\n\n\t\t\t\tfor (const [idx, i] of range.entries()) {\n\t\t\t\t\toptions[idx === 0 ? \"start\" : \"end\"] = i !== void 0 ? parseInt(i, 10) : void 0;\n\t\t\t\t}\n\n\t\t\t\t// Byte offsets\n\t\t\t\tif (isNaN(options.start) && isNaN(options.end) === false) {\n\t\t\t\t\toptions.start = file.stats.size - options.end;\n\t\t\t\t\toptions.end = file.stats.size;\n\t\t\t\t} else if (isNaN(options.end)) {\n\t\t\t\t\toptions.end = file.stats.size;\n\t\t\t\t}\n\n\t\t\t\tif (options.start >= options.end || isNaN(options.start) || isNaN(options.end)) {\n\t\t\t\t\tres.error(416);\n\t\t\t\t}\n\n\t\t\t\tstatus = 206;\n\t\t\t\tres.removeHeader(\"content-length\");\n\t\t\t\tres.removeHeader(\"etag\"); // Removing etag since this rep is incomplete\n\t\t\t\tres.header(\"content-range\", `bytes ${options.start}-${options.end}/${file.stats.size}`);\n\t\t\t\tres.header(\"content-length\", options.end - options.start + 1);\n\t\t\t}\n\n\t\t\tres.send(createReadStream(file.path, options), status);\n\t\t}\n\t} else if (req.method === \"HEAD\") {\n\t\tres.send(\"\");\n\t} else if (req.method === \"OPTIONS\") {\n\t\tres.removeHeader(\"content-length\");\n\t\tres.send(\"Make a GET request to retrieve the file\");\n\t} else {\n\t\tres.error(405);\n\t}\n\n\treturn void 0;\n}\n\nexport function timeOffset (arg = 0) {\n\tconst neg = arg < 0;\n\n\treturn `${neg ? \"\" : \"-\"}${String((neg ? -arg : arg) / 60).split(\".\").reduce((a, v, idx, arr) => {\n\t\ta.push(idx === 0 ? pad(v) : \"30\");\n\n\t\tif (arr.length === 1) {\n\t\t\ta.push(\"00\");\n\t\t}\n\n\t\treturn a;\n\t}, []).join(\"\")}`;\n}\n\nexport function writeHead (res, status, headers) {\n\tif (res.statusCode < status) {\n\t\tres.statusCode = status;\n\t}\n\n\tres.writeHead(res.statusCode, STATUS_CODES[res.statusCode], headers);\n}\n","\"use strict\";\n\nimport {METHODS, STATUS_CODES} from \"node:http\";\nimport {join, resolve} from \"node:path\";\nimport {EventEmitter} from \"node:events\";\nimport {readdir, stat} from \"node:fs\";\nimport {etag} from \"tiny-etag\";\nimport {precise} from \"precise\";\nimport {lru} from \"tiny-lru\";\nimport {all, delimiter, levels, months} from \"./constants.js\";\nimport {autoindex as aindex, clone, last, ms, next, pad, params, parse, partial, pipeable, reduce, stream, timeOffset, writeHead} from \"./utility.js\";\n\nclass Woodland extends EventEmitter {\n\tconstructor ({autoindex = false, cacheSize = 1e3, cacheTTL = 3e5, charset = \"utf-8\", defaultHeaders = {}, digit = 3, etags = true, indexes = [\"index.htm\", \"index.html\"], logging = {}, origins = [\"*\"], seed = 42, sendError = false, time = false} = {}) {\n\t\tsuper();\n\t\tthis.autoindex = autoindex;\n\t\tthis.ignored = new Set();\n\t\tthis.cache = lru(cacheSize, cacheTTL);\n\t\tthis.charset = charset;\n\t\tthis.corsExpose = \"\";\n\t\tthis.defaultHeaders = Object.keys(defaultHeaders).map(key => [key.toLowerCase(), defaultHeaders[key]]);\n\t\tthis.digit = digit;\n\t\tthis.etags = etags ? etag({cacheSize, cacheTTL, seed}) : null;\n\t\tthis.indexes = JSON.parse(JSON.stringify(indexes));\n\t\tthis.permissions = lru(cacheSize, cacheTTL);\n\t\tthis.logging = {\n\t\t\tenabled: logging.enabled !== false,\n\t\t\tformat: logging.format || \"%h %l %u %t \\\"%r\\\" %>s %b\",\n\t\t\tlevel: logging.level || \"info\"\n\t\t};\n\t\tthis.methods = [];\n\t\tthis.middleware = new Map();\n\t\tthis.origins = JSON.parse(JSON.stringify(origins));\n\t\tthis.sendError = sendError;\n\t\tthis.time = time;\n\n\t\tif (this.etags !== null) {\n\t\t\tthis.get(this.etags.middleware).ignore(this.etags.middleware);\n\t\t}\n\t}\n\n\tallowed (method, uri, override = false) {\n\t\treturn this.routes(uri, method, override).visible > 0;\n\t}\n\n\tallows (uri, override = false) {\n\t\tlet result = override === false ? this.permissions.get(uri) : void 0;\n\n\t\tif (override || result === void 0) {\n\t\t\tconst allMethods = this.routes(uri, all, override).visible > 0,\n\t\t\t\tlist = allMethods ? clone(METHODS) : this.methods.filter(i => this.allowed(i, uri, override));\n\n\t\t\tif (list.includes(\"GET\")) {\n\t\t\t\tif (list.includes(\"HEAD\") === false) {\n\t\t\t\t\tlist.push(\"HEAD\");\n\t\t\t\t}\n\n\t\t\t\tif (list.includes(\"OPTIONS\") === false) {\n\t\t\t\t\tlist.push(\"OPTIONS\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = list.sort().join(\", \");\n\t\t\tthis.permissions.set(uri, result);\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=allows, uri=${uri}, override=${override}, message=\"Determined 'allow' header value\"`, \"debug\");\n\t\t}\n\n\t\treturn result;\n\t}\n\n\talways (...args) {\n\t\treturn this.use(...args, all);\n\t}\n\n\tconnect (...args) {\n\t\treturn this.use(...args, \"CONNECT\");\n\t}\n\n\tclf (req, res) {\n\t\tconst date = new Date();\n\n\t\treturn this.logging.format.replace(\"%v\", req.headers.host)\n\t\t\t.replace(\"%h\", req.ip || \"-\")\n\t\t\t.replace(\"%l\", \"-\")\n\t\t\t.replace(\"%u\", req.parsed.username || \"-\")\n\t\t\t.replace(\"%t\", `[${date.getDate()}/${months[date.getMonth()]}/${date.getFullYear()}:${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())} ${timeOffset(date.getTimezoneOffset())}]`)\n\t\t\t.replace(\"%r\", `${req.method} ${req.parsed.pathname}${req.parsed.search} HTTP/1.1`)\n\t\t\t.replace(\"%>s\", res.statusCode)\n\t\t\t.replace(\"%b\", res.getHeader(\"content-length\") || \"-\")\n\t\t\t.replace(\"%{Referer}i\", req.headers.referer || \"-\")\n\t\t\t.replace(\"%{User-agent}i\", req.headers[\"user-agent\"] || \"-\");\n\t}\n\n\tdecorate (req, res) {\n\t\tif (this.time) {\n\t\t\treq.precise = precise().start();\n\t\t}\n\n\t\tconst parsed = parse(req);\n\n\t\treq.parsed = parsed;\n\t\treq.allow = this.allows(parsed.pathname);\n\t\treq.body = \"\";\n\t\treq.corsHost = \"origin\" in req.headers && req.headers.origin.replace(/^http(s)?:\\/\\//, \"\") !== req.headers.host;\n\t\treq.cors = req.corsHost && (this.origins.includes(all) || this.origins.includes(req.headers.origin));\n\t\treq.host = parsed.hostname;\n\t\treq.ip = \"x-forwarded-for\" in req.headers ? req.headers[\"x-forwarded-for\"].split(\",\").pop().trim() : req.connection.remoteAddress;\n\t\tres.locals = {};\n\t\treq.params = {};\n\t\tres.error = (status = 500, body) => {\n\t\t\tconst err = body !== void 0 ? body instanceof Error ? body : new Error(body) : new Error(STATUS_CODES[status]);\n\n\t\t\tres.statusCode = status;\n\n\t\t\tif (this.logging.enabled) {\n\t\t\t\tthis.log(`type=res.error, status=${status}, ip=${req.ip}, uri=${req.parsed.pathname}, message=\"Routing to error handler\"`, \"debug\");\n\t\t\t}\n\n\t\t\tthis.error(req, res, err);\n\t\t};\n\t\tres.header = res.setHeader;\n\t\tres.json = (arg, status = 200, headers = {\"content-type\": \"application/json; charset=utf-8\"}) => res.send(JSON.stringify(arg), status, headers);\n\t\tres.redirect = (uri, perm = true) => res.send(\"\", perm ? 301 : 302, {\"location\": uri});\n\t\tres.send = (body = \"\", status = 200, headers = {}) => {\n\t\t\tif (res.headersSent === false) {\n\t\t\t\t[body, status, headers] = this.onsend(req, res, body, status, headers);\n\n\t\t\t\tif (this.time && res.getHeader(\"x-response-time\") === void 0) {\n\t\t\t\t\tres.header(\"x-response-time\", `${ms(req.precise.stop().diff(), this.digit)}`);\n\t\t\t\t}\n\n\t\t\t\tif (pipeable(req.method, body)) {\n\t\t\t\t\twriteHead(res, status, headers);\n\t\t\t\t\tbody.on(\"error\", () => void 0).pipe(res);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof body !== \"string\" && \"toString\" in body) {\n\t\t\t\t\t\tbody = body.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (req.headers.range !== void 0) {\n\t\t\t\t\t\tconst buffered = Buffer.from(body);\n\n\t\t\t\t\t\tpartial(req, res, buffered, status, headers);\n\n\t\t\t\t\t\tif (req.range !== void 0) {\n\t\t\t\t\t\t\twriteHead(res, status, headers);\n\t\t\t\t\t\t\tres.end(buffered.slice(req.range.start, req.range.end + 1).toString(), this.charset);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete req.headers.range;\n\t\t\t\t\t\t\tres.error(416);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst cl = \"content-length\";\n\n\t\t\t\t\t\tif (res.getHeader(cl) === void 0) {\n\t\t\t\t\t\t\tres.header(cl, Buffer.byteLength(body));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twriteHead(res, status, headers);\n\t\t\t\t\t\tres.end(body, this.charset);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.logging.enabled) {\n\t\t\t\t\tthis.log(`type=res.send, uri=${req.parsed.pathname}, ip=${req.ip}, valid=true, message=\"Sending response body\"`, \"debug\");\n\t\t\t\t\tthis.log(this.clf(req, res), \"info\");\n\t\t\t\t}\n\t\t\t} else if (this.logging.enabled) {\n\t\t\t\tthis.log(`type=res.send, uri=${req.parsed.pathname}, ip=${req.ip}, valid=false, message=\"Headers already sent\"`, \"debug\");\n\t\t\t}\n\t\t};\n\t\tres.status = arg => {\n\t\t\tres.statusCode = arg;\n\n\t\t\treturn res;\n\t\t};\n\n\t\tfor (const i of this.defaultHeaders) {\n\t\t\tres.header(i[0], i[1]);\n\t\t}\n\n\t\tres.header(\"allow\", req.allow);\n\n\t\tif (req.cors) {\n\t\t\tconst headers = req.headers[\"access-control-request-headers\"] || this.corsExpose;\n\n\t\t\tres.header(\"access-control-allow-origin\", req.headers.origin);\n\t\t\tres.header(\"timing-allow-origin\", req.headers.origin);\n\t\t\tres.header(\"access-control-allow-credentials\", \"true\");\n\n\t\t\tif (headers !== void 0) {\n\t\t\t\tres.header(`access-control-${req.method === \"OPTIONS\" ? \"allow\" : \"expose\"}-headers`, headers);\n\t\t\t}\n\n\t\t\tres.header(\"access-control-allow-methods\", req.allow);\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=decorate, uri=${req.parsed.pathname}, method=${req.method}, ip=${req.ip}, message=\"Decorated request from ${req.ip}\"`, \"debug\");\n\t\t}\n\t}\n\n\tdel (...args) {\n\t\treturn this.use(...args, \"DELETE\");\n\t}\n\n\tdelete (...args) {\n\t\treturn this.use(...args, \"DELETE\");\n\t}\n\n\terror (req, res, err) {\n\t\tconst ev = \"error\";\n\n\t\tif (res.headersSent === false) {\n\t\t\tconst numeric = isNaN(err.message) === false,\n\t\t\t\tstatus = isNaN(res.statusCode) === false && res.statusCode >= 400 ? res.statusCode : numeric ? Number(err.message) : 500,\n\t\t\t\toutput = this.sendError === false ? numeric ? STATUS_CODES[status] : err.message : err;\n\n\t\t\tif (status === 404) {\n\t\t\t\tres.removeHeader(\"allow\");\n\t\t\t\tres.header(\"allow\", \"\");\n\n\t\t\t\tif (req.cors) {\n\t\t\t\t\tres.removeHeader(\"access-control-allow-methods\");\n\t\t\t\t\tres.header(\"access-control-allow-methods\", req.allow);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (numeric && this.sendError) {\n\t\t\t\toutput.message = STATUS_CODES[status];\n\t\t\t}\n\n\t\t\tres.statusCode = status;\n\t\t\tres.send(output, status);\n\t\t}\n\n\t\tif (this.listenerCount(ev) > 0) {\n\t\t\tthis.emit(ev, req, res, err);\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=error, message=\"Handled error response for ${req.ip}\"`, \"debug\");\n\t\t}\n\t}\n\n\tetag (method, ...args) {\n\t\treturn (method === \"GET\" || method === \"HEAD\" || method === \"OPTIONS\") && this.etags !== null ? this.etags.create(args.map(i => typeof i !== \"string\" ? JSON.stringify(i).replace(/^\"|\"$/g, \"\") : i).join(\"-\")) : \"\";\n\t}\n\n\tget (...args) {\n\t\treturn this.use(...args, \"GET\");\n\t}\n\n\tignore (fn) {\n\t\tthis.ignored.add(fn);\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=ignore, message=\"Added function to ignored Set\", code=\"${fn.toString()}\"`, \"debug\");\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tlist (method = \"get\", type = \"array\") {\n\t\tlet result;\n\n\t\tif (type === \"array\") {\n\t\t\tresult = Array.from(this.middleware.get(method.toUpperCase()).keys());\n\t\t} else if (type === \"object\") {\n\t\t\tresult = {};\n\n\t\t\tfor (const [key, value] of this.middleware.get(method.toUpperCase()).entries()) {\n\t\t\t\tresult[key] = value;\n\t\t\t}\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=list, method=${method}, type=${type}`, \"debug\");\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tlog (msg, level = \"debug\") {\n\t\tconst idx = levels[level];\n\n\t\tif (idx <= levels[this.logging.level]) {\n\t\t\tprocess.nextTick(() => console[idx > 4 ? \"log\" : \"error\"](msg));\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tonsend (req, res, body, status, headers) {\n\t\treturn [body, status, headers];\n\t}\n\n\toptions (...args) {\n\t\treturn this.use(...args, \"OPTIONS\");\n\t}\n\n\tpatch (...args) {\n\t\treturn this.use(...args, \"PATCH\");\n\t}\n\n\tpath (arg = \"\") {\n\t\treturn arg.replace(/\\/:([^/]+)/g, \"/([^/]+)\");\n\t}\n\n\tpost (...args) {\n\t\treturn this.use(...args, \"POST\");\n\t}\n\n\tput (...args) {\n\t\treturn this.use(...args, \"PUT\");\n\t}\n\n\troute (req, res) {\n\t\tconst e = err => res.error(res.statusCode, err),\n\t\t\tevc = \"connect\",\n\t\t\tevf = \"finish\";\n\t\tlet method = req.method === \"HEAD\" ? \"GET\" : req.method;\n\n\t\tthis.decorate(req, res);\n\n\t\tif (this.listenerCount(evc) > 0) {\n\t\t\tthis.emit(evc, req, res);\n\t\t}\n\n\t\tif (this.listenerCount(evf) > 0) {\n\t\t\tres.on(evf, () => this.emit(evf, req, res));\n\t\t}\n\n\t\tif (method === \"OPTIONS\" && this.allowed(method, req.parsed.pathname) === false) {\n\t\t\tmethod = \"GET\"; // Changing an OPTIONS request to GET due to absent route\n\t\t}\n\n\t\tif (req.cors === false && \"origin\" in req.headers && req.corsHost && this.origins.includes(req.headers.origin) === false) {\n\t\t\tres.error(403);\n\t\t} else if (req.allow.includes(method)) {\n\t\t\tconst result = this.routes(req.parsed.pathname, method);\n\n\t\t\tif (result.params) {\n\t\t\t\tparams(req, result.pos);\n\t\t\t}\n\n\t\t\treq.last = result.last;\n\t\t\tnext(req, res, e, result.middleware[Symbol.iterator]())();\n\t\t} else {\n\t\t\tlast(req, res, e);\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(\"type=route, message=\\\"Routing request\\\"\", \"debug\");\n\t\t}\n\t}\n\n\troutes (uri, method, override = false) {\n\t\tconst key = `${method}${delimiter}${uri}`,\n\t\t\tcached = override === false ? this.cache.get(key) : void 0;\n\t\tlet result;\n\n\t\tif (cached !== void 0) {\n\t\t\tresult = cached;\n\t\t} else {\n\t\t\tresult = {middleware: [], params: false, pos: [], visible: 0, last: null};\n\t\t\treduce(uri, this.middleware.get(all), result);\n\n\t\t\tif (method !== all) {\n\t\t\t\treduce(uri, this.middleware.get(method), result, true, this.ignored);\n\t\t\t}\n\n\t\t\tresult.visible = result.middleware.filter(i => this.ignored.has(i) === false).length;\n\t\t\tthis.cache.set(key, result);\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=routes, uri=${uri}, method=${method}, cached=${cached !== void 0}, middleware=${result.middleware.length}, params=${result.params}, visible=${result.visible}, override=${override}, message=\"Retrieved middleware for request\"`, \"debug\");\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tserve (req, res, arg = \"\", folder = process.cwd(), index = this.indexes) {\n\t\tconst fp = resolve(folder, decodeURIComponent(arg));\n\n\t\tif (req.method !== \"GET\" && req.method !== \"HEAD\" && req.method !== \"OPTIONS\") {\n\t\t\tif (req.allow.length > 0) {\n\t\t\t\treq.allow = \"GET, HEAD, OPTIONS\";\n\t\t\t\tres.header(\"allow\", req.allow);\n\t\t\t}\n\n\t\t\tres.error(405);\n\t\t} else {\n\t\t\tstat(fp, {bigint: false}, (e, stats) => {\n\t\t\t\tif (e !== null) {\n\t\t\t\t\tres.error(404);\n\t\t\t\t} else if (stats.isDirectory() === false) {\n\t\t\t\t\tstream(req, res, {charset: this.charset, etag: this.etag(req.method, stats.ino, stats.size, stats.mtimeMs), path: fp, stats: stats});\n\t\t\t\t} else if (req.parsed.pathname.endsWith(\"/\") === false) {\n\t\t\t\t\tres.redirect(`${req.parsed.pathname}/${req.parsed.search}`);\n\t\t\t\t} else {\n\t\t\t\t\treaddir(fp, {encoding: \"utf8\", withFileTypes: true}, (e2, files) => {\n\t\t\t\t\t\tif (e2 !== null) {\n\t\t\t\t\t\t\tres.error(500, e2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet result = \"\";\n\n\t\t\t\t\t\t\tfor (const file of files) {\n\t\t\t\t\t\t\t\tif (index.includes(file.name)) {\n\t\t\t\t\t\t\t\t\tresult = join(fp, file.name);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (result.length === 0) {\n\t\t\t\t\t\t\t\tif (this.autoindex === false) {\n\t\t\t\t\t\t\t\t\tres.error(404);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlet valid = true,\n\t\t\t\t\t\t\t\t\t\tbody = \"\",\n\t\t\t\t\t\t\t\t\t\tlerr;\n\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tbody = aindex(decodeURIComponent(req.parsed.pathname), files);\n\t\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\t\t\t\tlerr = err;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\t\t\tres.header(\"content-type\", `text/html; charset=${this.charset}`);\n\t\t\t\t\t\t\t\t\t\tres.send(body);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tres.error(500, lerr);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstat(result, {bigint: false}, (e3, rstats) => {\n\t\t\t\t\t\t\t\t\tif (e3 !== null) {\n\t\t\t\t\t\t\t\t\t\tres.error(500, e3);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tstream(req, res, {charset: this.charset, etag: this.etag(req.method, rstats.ino, rstats.size, rstats.mtimeMs), path: result, stats: rstats});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=serve, uri=${req.parsed.pathname}, method=${req.method}, message=\"Routing request to file system\"`, \"debug\");\n\t\t}\n\t}\n\n\ttrace (...args) {\n\t\treturn this.use(...args, \"TRACE\");\n\t}\n\n\tuse (rpath, ...fn) {\n\t\tif (typeof rpath === \"function\") {\n\t\t\tfn = [rpath, ...fn];\n\t\t\trpath = `/.${all}`;\n\t\t}\n\n\t\tconst method = typeof fn[fn.length - 1] === \"string\" ? fn.pop().toUpperCase() : \"GET\";\n\n\t\tif (method !== all && METHODS.includes(method) === false) {\n\t\t\tthrow new TypeError(\"Invalid HTTP method\");\n\t\t}\n\n\t\tif (method === \"HEAD\") {\n\t\t\tthrow new TypeError(\"Cannot set HEAD route, use GET\");\n\t\t}\n\n\t\tif (this.middleware.has(method) === false) {\n\t\t\tif (method !== all) {\n\t\t\t\tthis.methods.push(method);\n\t\t\t}\n\n\t\t\tthis.middleware.set(method, new Map());\n\t\t}\n\n\t\tconst mmethod = this.middleware.get(method),\n\t\t\tlpos = [];\n\t\tlet lrpath = rpath,\n\t\t\tlparams = false;\n\n\t\tif (lrpath.includes(\":\") && lrpath.includes(\"(\") === false) {\n\t\t\tlparams = true;\n\n\t\t\tfor (const [idx, i] of lrpath.split(\"/\").entries()) {\n\t\t\t\tif (i[0] === \":\") {\n\t\t\t\t\tlpos.push([idx, i.replace(/^:/, \"\")]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlrpath = this.path(lrpath);\n\t\t}\n\n\t\tconst current = mmethod.get(lrpath) || {},\n\t\t\tkeep = (current.pos || []).length > 0;\n\n\t\tlrpath = new RegExp(`^${lrpath}$`);\n\t\tmmethod.set(lrpath, {\n\t\t\thandlers: [...current.handlers || [], ...fn],\n\t\t\tparams: keep ? current.params : lparams,\n\t\t\tpos: keep ? current.pos : lpos\n\t\t});\n\n\t\tif (this.logging.enabled) {\n\t\t\tthis.log(`type=use, route=${rpath}, method=${method}, message=\"Registering middleware\"`, \"debug\");\n\t\t}\n\n\t\treturn this;\n\t}\n}\n\nexport function woodland (arg) {\n\tconst router = new Woodland(arg);\n\n\trouter.route = router.route.bind(router);\n\n\treturn router;\n}\n"],"names":["all","delimiter","levels","emerg","alert","crit","error","warn","notice","info","debug","months","__dirname","fileURLToPath","URL","import","meta","url","html","readFileSync","join","encoding","valid","Object","entries","mimeDb","filter","i","extensions","reduce","a","v","result","assign","type","key","autoindex","title","files","eval","clone","arg","JSON","parse","stringify","last","req","res","e","err","status","statusCode","Error","allow","length","method","includes","isNaN","message","STATUS_CODES","mime","ext","extname","ms","digits","Number","toFixed","next","middleware","fn","process","nextTick","obj","done","value","pad","String","padStart","params","pos","uri","parsed","ame","split","coerce","decodeURIComponent","headers","host","socket","server","_connectionKey","replace","partial","buffered","range","indexOf","options","size","Buffer","byteLength","idx","parseInt","start","end","removeHeader","etag","pipeable","on","map","Map","ignore","Set","Array","from","lastIndex","test","forEach","handlers","push","has","stream","file","charset","path","stats","mtime","Date","header","toUTCString","send","createReadStream","timeOffset","neg","arr","writeHead","Woodland","EventEmitter","constructor","cacheSize","cacheTTL","defaultHeaders","digit","etags","indexes","logging","origins","seed","sendError","time","super","this","ignored","cache","lru","corsExpose","keys","toLowerCase","permissions","enabled","format","level","methods","get","allowed","override","routes","visible","allows","list","METHODS","sort","set","log","always","args","use","connect","clf","date","ip","username","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","getTimezoneOffset","pathname","search","getHeader","referer","decorate","precise","body","corsHost","origin","cors","hostname","pop","trim","connection","remoteAddress","locals","setHeader","json","redirect","perm","location","headersSent","onsend","stop","diff","pipe","toString","slice","cl","del","delete","ev","numeric","output","listenerCount","emit","create","add","toUpperCase","msg","console","patch","post","put","route","evc","evf","Symbol","iterator","cached","serve","folder","cwd","index","fp","resolve","stat","bigint","isDirectory","ino","mtimeMs","endsWith","readdir","withFileTypes","e2","name","lerr","aindex","e3","rstats","trace","rpath","TypeError","mmethod","lpos","lrpath","lparams","current","keep","RegExp","woodland","router","bind"],"mappings":"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"}